<!DOCTYPE html>
<html class="v2" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr"><head>
<meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible">
<meta content="width=1100" name="viewport">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="blogger" name="generator">
<link href="http://carlislebear.blogspot.tw/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://carlislebear.blogspot.com/2015/03/use-mysql-transaction-in-php.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="老天尊的死期 - Atom" href="http://carlislebear.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="老天尊的死期 - RSS" href="http://carlislebear.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="老天尊的死期 - Atom" href="https://www.blogger.com/feeds/3222136512686545171/posts/default">

<link rel="alternate" type="application/atom+xml" title="老天尊的死期 - Atom" href="http://carlislebear.blogspot.com/feeds/3974337916223683587/comments/default">
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/3032875878-ieretrofit.js"></script>
<![endif]-->
<link href="https://plus.google.com/108097203437571368519" rel="publisher">
<meta content="http://carlislebear.blogspot.com/2015/03/use-mysql-transaction-in-php.html" property="og:url">
<meta content="用PHP實現MySQL Transaction 交易功能" property="og:title">
<meta content="情境：  假設庫存有6隻手機( stock )要賣，總共有8個人要搶購，手機庫存不能小於零，所以只有六個人會買到。把有誰在搶購( action_record )和誰搶購到紀錄( trade_record )到資料表，並更商品新庫存數量。並在交易後執行一些SQL，來確保交易後的SQ..." property="og:description">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>老天尊的死期: 用PHP實現MySQL Transaction 交易功能</title>
<link type="text/css" rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/178992763-css_bundle_v2.css">
<link type="text/css" rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/authorization.css">
<link type="text/css" rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/gsearch.css">
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Josh Peterson
URL:      www.noaesthetic.com
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="keycolor" description="Main Color" type="color" default="#66bbdd"/>
<Group description="Page Text" selector="body">
<Variable name="body.font" description="Font" type="font"
default="normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="body.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Backgrounds" selector=".body-fauxcolumns-outer">
<Variable name="body.background.color" description="Outer Background" type="color" default="#66bbdd"/>
<Variable name="content.background.color" description="Main Background" type="color" default="#ffffff"/>
<Variable name="header.background.color" description="Header Background" type="color" default="transparent"/>
</Group>
<Group description="Links" selector=".main-outer">
<Variable name="link.color" description="Link Color" type="color" default="#2288bb"/>
<Variable name="link.visited.color" description="Visited Color" type="color" default="#888888"/>
<Variable name="link.hover.color" description="Hover Color" type="color" default="#33aaff"/>
</Group>
<Group description="Blog Title" selector=".header h1">
<Variable name="header.font" description="Font" type="font"
default="normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="header.text.color" description="Title Color" type="color" default="#3399bb" />
</Group>
<Group description="Blog Description" selector=".header .description">
<Variable name="description.text.color" description="Description Color" type="color"
default="#777777" />
</Group>
<Group description="Tabs Text" selector=".tabs-inner .widget li a">
<Variable name="tabs.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="tabs.text.color" description="Text Color" type="color" default="#999999"/>
<Variable name="tabs.selected.text.color" description="Selected Color" type="color" default="#000000"/>
</Group>
<Group description="Tabs Background" selector=".tabs-outer .PageList">
<Variable name="tabs.background.color" description="Background Color" type="color" default="#f5f5f5"/>
<Variable name="tabs.selected.background.color" description="Selected Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Post Title" selector="h3.post-title, .comments h4">
<Variable name="post.title.font" description="Font" type="font"
default="normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
</Group>
<Group description="Date Header" selector=".date-header">
<Variable name="date.header.color" description="Text Color" type="color"
default="#222222"/>
<Variable name="date.header.background.color" description="Background Color" type="color"
default="transparent"/>
<Variable name="date.header.font" description="Text Font" type="font"
default="normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="date.header.padding" description="Date Header Padding" type="string" default="inherit"/>
<Variable name="date.header.letterspacing" description="Date Header Letter Spacing" type="string" default="inherit"/>
<Variable name="date.header.margin" description="Date Header Margin" type="string" default="inherit"/>
</Group>
<Group description="Post Footer" selector=".post-footer">
<Variable name="post.footer.text.color" description="Text Color" type="color" default="#666666"/>
<Variable name="post.footer.background.color" description="Background Color" type="color"
default="#f9f9f9"/>
<Variable name="post.footer.border.color" description="Shadow Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Gadgets" selector="h2">
<Variable name="widget.title.font" description="Title Font" type="font"
default="normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="widget.title.text.color" description="Title Color" type="color" default="#000000"/>
<Variable name="widget.alternate.text.color" description="Alternate Color" type="color" default="#999999"/>
</Group>
<Group description="Images" selector=".main-inner">
<Variable name="image.background.color" description="Background Color" type="color" default="#ffffff"/>
<Variable name="image.border.color" description="Border Color" type="color" default="#eeeeee"/>
<Variable name="image.text.color" description="Caption Text Color" type="color" default="#222222"/>
</Group>
<Group description="Accents" selector=".content-inner">
<Variable name="body.rule.color" description="Separator Line Color" type="color" default="#eeeeee"/>
<Variable name="tabs.border.color" description="Tabs Border Color" type="color" default="#eeeeee"/>
</Group>
<Variable name="body.background" description="Body Background" type="background"
color="#66bbdd" default="$(color) none repeat scroll top left"/>
<Variable name="body.background.override" description="Body Background Override" type="string" default=""/>
<Variable name="body.background.gradient.cap" description="Body Gradient Cap" type="url"
default="url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png)"/>
<Variable name="body.background.gradient.tile" description="Body Gradient Tile" type="url"
default="url(https://resources.blogblog.com/blogblog/data/1kt/simple/body_gradient_tile_light.png)"/>
<Variable name="content.background.color.selector" description="Content Background Color Selector" type="string" default=".content-inner"/>
<Variable name="content.padding" description="Content Padding" type="length" default="10px" min="0" max="100px"/>
<Variable name="content.padding.horizontal" description="Content Horizontal Padding" type="length" default="10px" min="0" max="100px"/>
<Variable name="content.shadow.spread" description="Content Shadow Spread" type="length" default="40px" min="0" max="100px"/>
<Variable name="content.shadow.spread.webkit" description="Content Shadow Spread (WebKit)" type="length" default="5px" min="0" max="100px"/>
<Variable name="content.shadow.spread.ie" description="Content Shadow Spread (IE)" type="length" default="10px" min="0" max="100px"/>
<Variable name="main.border.width" description="Main Border Width" type="length" default="0" min="0" max="10px"/>
<Variable name="header.background.gradient" description="Header Gradient" type="url" default="none"/>
<Variable name="header.shadow.offset.left" description="Header Shadow Offset Left" type="length" default="-1px" min="-50px" max="50px"/>
<Variable name="header.shadow.offset.top" description="Header Shadow Offset Top" type="length" default="-1px" min="-50px" max="50px"/>
<Variable name="header.shadow.spread" description="Header Shadow Spread" type="length" default="1px" min="0" max="100px"/>
<Variable name="header.padding" description="Header Padding" type="length" default="30px" min="0" max="100px"/>
<Variable name="header.border.size" description="Header Border Size" type="length" default="1px" min="0" max="10px"/>
<Variable name="header.bottom.border.size" description="Header Bottom Border Size" type="length" default="1px" min="0" max="10px"/>
<Variable name="header.border.horizontalsize" description="Header Horizontal Border Size" type="length" default="0" min="0" max="10px"/>
<Variable name="description.text.size" description="Description Text Size" type="string" default="140%"/>
<Variable name="tabs.margin.top" description="Tabs Margin Top" type="length" default="0" min="0" max="100px"/>
<Variable name="tabs.margin.side" description="Tabs Side Margin" type="length" default="30px" min="0" max="100px"/>
<Variable name="tabs.background.gradient" description="Tabs Background Gradient" type="url"
default="url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png)"/>
<Variable name="tabs.border.width" description="Tabs Border Width" type="length" default="1px" min="0" max="10px"/>
<Variable name="tabs.bevel.border.width" description="Tabs Bevel Border Width" type="length" default="1px" min="0" max="10px"/>
<Variable name="post.margin.bottom" description="Post Bottom Margin" type="length" default="25px" min="0" max="100px"/>
<Variable name="image.border.small.size" description="Image Border Small Size" type="length" default="2px" min="0" max="10px"/>
<Variable name="image.border.large.size" description="Image Border Large Size" type="length" default="5px" min="0" max="10px"/>
<Variable name="page.width.selector" description="Page Width Selector" type="string" default=".region-inner"/>
<Variable name="page.width" description="Page Width" type="string" default="auto"/>
<Variable name="main.section.margin" description="Main Section Margin" type="length" default="15px" min="0" max="100px"/>
<Variable name="main.padding" description="Main Padding" type="length" default="15px" min="0" max="100px"/>
<Variable name="main.padding.top" description="Main Padding Top" type="length" default="30px" min="0" max="100px"/>
<Variable name="main.padding.bottom" description="Main Padding Bottom" type="length" default="30px" min="0" max="100px"/>
<Variable name="paging.background"
color="#ffffff"
description="Background of blog paging area" type="background"
default="transparent none no-repeat scroll top center"/>
<Variable name="footer.bevel" description="Bevel border length of footer" type="length" default="0" min="0" max="10px"/>
<Variable name="mobile.background.overlay" description="Mobile Background Overlay" type="string"
default="transparent none repeat scroll top left"/>
<Variable name="mobile.background.size" description="Mobile Background Size" type="string" default="auto"/>
<Variable name="mobile.button.color" description="Mobile Button Color" type="color" default="#ffffff" />
<Variable name="startSide" description="Side where text starts in blog language" type="automatic" default="left"/>
<Variable name="endSide" description="Side where text ends in blog language" type="automatic" default="right"/>
*/
/* Content
----------------------------------------------- */
body {
font: normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
background: #66bbdd none repeat scroll top left;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2288bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #33aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent url(https://resources.blogblog.com/blogblog/data/1kt/simple/body_gradient_tile_light.png) repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png) repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #3399bb;
text-shadow: -1px -1px 1px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #3399bb;
}
.Header .description {
font-size: 140%;
color: #777777;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 1px solid #eeeeee;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #eeeeee;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.tabs-inner .widget ul {
background: #f5f5f5 url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png) repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #eeeeee;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #999999;
border-left: 1px solid #ffffff;
border-right: 1px solid #eeeeee;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #eeeeee;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #eeeeee;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #eeeeee;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: transparent;
color: #222222;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #222222;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #f9f9f9;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #eeeeee;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #f9f9f9;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #eeeeee;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #222222;
}
.mobile-link-button {
background-color: #2288bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid #eeeeee;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #eeeeee;
}

--></style>
<style id="template-skin-1" type="text/css"><!--
body {
min-width: 960px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 960px;
max-width: 960px;
_width: 960px;
}
.main-inner .columns {
padding-left: 0;
padding-right: 310px;
}
.main-inner .fauxcolumn-center-outer {
left: 0;
right: 310px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0") -
parseInt("310px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0;
}
.main-inner .fauxcolumn-right-outer {
width: 310px;
}
.main-inner .column-left-outer {
width: 0;
right: 100%;
margin-left: -0;
}
.main-inner .column-right-outer {
width: 310px;
margin-right: -310px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<link href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shCore.css" rel="stylesheet" type="text/css">
<link href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shThemeRDark.css" rel="stylesheet" type="text/css">
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/async-ads.js" async=""></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/async-ads.js" async=""></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/async-ads.js" async=""></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/async-ads.js" async=""></script><script async="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cbgapi.loaded_4"></script><script async="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cbgapi.loaded_3"></script><script async="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cbgapi.loaded_2"></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cse.js" async="" type="text/javascript"></script><script async="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cbgapi.loaded_1"></script><script async="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/cbgapi.loaded_0"></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shCore.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushAS3.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushBash.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushColdFusion.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushCSharp.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushCpp.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushCss.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushDelphi.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushDiff.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushErlang.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushGroovy.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushJScript.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushJava.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushJavaFX.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushPerl.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushPhp.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushPlain.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushPowerShell.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushPython.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushRuby.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushScala.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushSql.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushVb.js" type="text/javascript"></script>
<script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/shBrushXml.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
      SyntaxHighlighter.config.bloggerMode = true;
      SyntaxHighlighter.all();
    </script>
<style>
	.syntaxhighlighter table td.code .line { padding: 0 0 0 1em !important; width: 527px; }
	</style>
<script type="text/javascript">function a(){var b=window.location.href,c=b.split("?");switch(c.length){case 1:return b+"?m=1";case 2:return 0<=c[1].search("(^|&)m=")?null:b+"&m=1";default:return null}}var d=navigator.userAgent;if(-1!=d.indexOf("Mobile")&&-1!=d.indexOf("WebKit")&&-1==d.indexOf("iPad")||-1!=d.indexOf("Opera Mini")||-1!=d.indexOf("IEMobile")){var e=a();e&&window.location.replace(e)};
</script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/google_top_exp.js" type="text/javascript"></script><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/a" type="text/javascript"></script><style>.gc-bubbleDefault{background-color:transparent !important;text-align:left;padding:0 !important;margin:0 !important;border:0 !important;table-layout:auto !important}.gc-reset{background-color:transparent !important;border:0 !important;padding:0 !important;margin:0 !important;text-align:left}.pls-bubbleTop{border-bottom:1px solid #ccc !important}.pls-topTail,.pls-vertShimLeft,.pls-contentLeft{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/border_3.gif) !important}.pls-topTail{background-repeat:repeat-x !important;background-position:bottom !important}.pls-vertShim{background-color:#fff !important;text-align:right}.tbl-grey .pls-vertShim{background-color:#f5f5f5 !important}.pls-vertShimLeft{background-repeat:repeat-y !important;background-position:right !important;height:4px}.pls-vertShimRight{height:4px}.pls-confirm-container .pls-vertShim{background-color:#fff3c2 !important}.pls-contentWrap{background-color:#fff !important;position:relative !important;vertical-align:top}.pls-contentLeft{background-repeat:repeat-y;background-position:right;vertical-align:top}.pls-dropRight{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropR_3.png) !important;background-repeat:repeat-y !important;vertical-align:top}.pls-vert,.pls-tailleft,.pls-dropTR .pls-dropBR,.pls-dropBL,.pls-vert img{vertical-align:top}.pls-dropBottom{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropB_3.png) !important;background-repeat:repeat-x !important;width:100%;vertical-align:top}.pls-topLeft{background:inherit !important;text-align:right;vertical-align:bottom}.pls-topRight{background:inherit !important;text-align:left;vertical-align:bottom}.pls-bottomLeft{background:inherit !important;text-align:right}.pls-bottomRight{background:inherit !important;text-align:left;vertical-align:top}.pls-tailtop,.pls-tailright,.pls-tailbottom,.pls-tailleft{display:none;position:relative}.pls-tailbottom,.pls-tailtop,.pls-tailright,.pls-tailleft,.pls-dropTR,.pls-dropBR,.pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite_3.png) !important;background-repeat:no-repeat}.tbl-grey .pls-tailbottom,.tbl-grey .pls-tailtop,.tbl-grey .pls-tailright,.tbl-grey .pls-tailleft,.tbl-grey .pls-dropTR,.tbl-grey .pls-dropBR,.tbl-grey .pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite-grey.png) !important}.pls-tailbottom{background-position:-23px 0}.pls-confirm-container .pls-tailbottom{background-position:-23px -10px}.pls-tailtop{background-position:-19px -20px}.pls-tailright{background-position:0 0}.pls-tailleft{background-position:-10px 0}.pls-tailtop{vertical-align:top}.gc-bubbleDefault td{line-height:0;font-size:0}.pls-topLeft img,.pls-topRight img,.pls-tailbottom{vertical-align:bottom}.pls-bottomLeft img,.bubbleDropTR,.pls-dropBottomL img,.pls-dropBottom img,.pls-dropBottomR img,.pls-bottomLeft{vertical-align:top}.pls-dropTR{background-position:0 -22px}.pls-dropBR{background-position:0 -27px}.pls-dropBL{background-position:0 -16px}.pls-spacertop,.pls-spacerright,.pls-spacerbottom,.pls-spacerleft{position:static !important}.pls-spinner{bottom:0;position:absolute;left:0;margin:auto;right:0;top:0} </style><link rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/defaultzh_TW.css" type="text/css"><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/defaultzh_TW.js" type="text/javascript"></script><script type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/jsapi"></script><link rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/defaulten.css" type="text/css"><link rel="stylesheet" href="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/default.css" type="text/css"><script src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/defaulten.js" type="text/javascript"></script><style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #D9D9D9;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #666666;
background-color: #CECECE;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #E9E9E9;
background-color: #E9E9E9;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #FF9900;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #FF9900;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #0000CC;
}
.gsc-cursor-page {
color: #0000CC;
}
a.gsc-trailing-more-results:link {
color: #0000CC;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #000000;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #FFFFFF;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #E9E9E9;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #FF9900;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #336699;
background-color: #FFFFFF;
}
.gsc-completion-title {
color: #0000CC;
}
.gsc-completion-snippet {
color: #000000;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #0000CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #0000CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #0000CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #0000CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #000000;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #008000;
}</style><style type="text/css">.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;position:relative;user-select:none;-moz-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gsq_a{padding:0}.gscsep_a{display:none}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_a{padding:0 7px}.gssb_e{border:0}.gssb_l{margin:5px 0}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style></head>
<body class=" variant-pale">
<div class="navbar section" id="navbar"><div class="widget Navbar" data-version="1" id="Navbar1"><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"><iframe src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/navbar.html" name="navbar-iframe" id="navbar-iframe" vspace="0" tabindex="0" style="" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div>
<script gapi_processed="true" type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d3222136512686545171\x26blogName\x3d%E8%80%81%E5%A4%A9%E5%B0%8A%E7%9A%84%E6%AD%BB%E6%9C%9F\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttp://carlislebear.blogspot.com/search\x26blogLocale\x3dzh_TW\x26v\x3d2\x26homepageUrl\x3dhttp://carlislebear.blogspot.com/\x26targetPostID\x3d3974337916223683587\x26blogPostOrPageUrl\x3dhttp://carlislebear.blogspot.com/2015/03/use-mysql-transaction-in-php.html\x26vt\x3d2227511756077493936',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class="body-fauxcolumns">
<div class="fauxcolumn-outer body-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content">
<div class="content-fauxcolumns">
<div class="fauxcolumn-outer content-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content-outer">
<div class="content-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left content-fauxborder-left">
<div class="fauxborder-right content-fauxborder-right"></div>
<div class="content-inner">
<header>
<div class="header-outer">
<div class="header-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left header-fauxborder-left">
<div class="fauxborder-right header-fauxborder-right"></div>
<div class="region-inner header-inner">
<div class="header section" id="header"><div class="widget Header" data-version="1" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">
<a href="http://carlislebear.blogspot.tw/">老天尊的死期</a>
</h1>
</div>
<div class="descriptionwrapper">
<p class="description"><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class="header-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</header>
<div class="tabs-outer">
<div class="tabs-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left tabs-fauxborder-left">
<div class="fauxborder-right tabs-fauxborder-right"></div>
<div class="region-inner tabs-inner">
<div class="tabs no-items section" id="crosscol"></div>
<div class="tabs no-items section" id="crosscol-overflow"></div>
</div>
</div>
<div class="tabs-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="main-outer">
<div class="main-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left main-fauxborder-left">
<div class="fauxborder-right main-fauxborder-right"></div>
<div class="region-inner main-inner">
<div class="columns fauxcolumns">
<div class="fauxcolumn-outer fauxcolumn-center-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-left-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-right-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class="columns-inner">
<div class="column-center-outer">
<div class="column-center-inner">
<div class="main section" id="main"><div id="uds-searchControl"><a name="uds-search-results"></a><div id="uds-searchResults"><div dir="ltr" class="gsc-control"><div class="gsc-results-wrapper-nooverlay"><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">此網誌</div><span class="gs-spacer"> </span><div class=" gsc-tabHeader gsc-tabhInactive gsc-inline-block" tabindex="0">從這裡連結</div><span class="gs-spacer"> </span><div class=" gsc-tabHeader gsc-tabhInactive gsc-inline-block" tabindex="0">網頁</div><span class="gs-spacer"> </span></div><div class="gsc-above-wrapper-area-invisible"><table class="gsc-above-wrapper-area-container" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td></tr></tbody></table></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">此網誌</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-more-results-active"><div title="顯示單一結果" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="顯示更多結果" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="顯示所有結果" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div><div class="gsc-resultsRoot gsc-tabData gsc-tabdInactive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">從這裡連結</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-more-results-active"><div title="顯示單一結果" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="顯示更多結果" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="顯示所有結果" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div><div class="gsc-resultsRoot gsc-tabData gsc-tabdInactive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">網頁</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-more-results-active"><div title="顯示單一結果" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="顯示更多結果" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="顯示所有結果" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div></div><div style="display: none;" class="gsc-clear-button" id="uds-searchClearResults">&nbsp;</div></div><div class="widget Blog" data-version="1" id="Blog1">
<div class="blog-posts hfeed">

          <div class="date-outer">
        
<h2 class="date-header"><span>2015年3月17日 星期二</span></h2>

          <div class="date-posts">
        
<div class="post-outer">
<div class="post hentry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<a name="3974337916223683587"></a>
<h3 class="post-title entry-title" itemprop="name">
用PHP實現MySQL Transaction 交易功能
</h3>
<div class="post-header">
<div class="post-header-line-1"></div>
</div>
<div class="post-body entry-content" id="post-body-3974337916223683587" itemprop="articleBody">
<b>情境：</b><br>
假設庫存有6隻手機(<i>stock</i>)要賣，總共有8個人要搶購，手機庫存不能小於零，所以只有六個人會買到。把有誰在搶購(<i>action_record</i>)和誰搶購到紀錄(<i>trade_record</i>)到資料表，並更商品新庫存數量。並在交易後執行一些SQL，來確保交易後的SQL可以正常執行。<br>
<br>
我在trade資料庫的<b>資料表結構</b>如下，我用下面這三張表做測試：<br>
<div><div id="highlighter_971922" class="syntaxhighlighter  sql"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">/*! action_record表是操作紀錄，有連線進來的紀錄都記進去，不受商品庫存影響 */</code></div><div class="line number2 index1 alt1"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`action_record` (</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">action</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(255) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`ms` </code><code class="sql keyword">varchar</code><code class="sql plain">(255) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`new_time` datetime </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`)</code></div><div class="line number8 index7 alt1"><code class="sql plain">) ENGINE=InnoDB </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=utf8;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="sql plain">/*! stock表是商品資料表，記錄了庫存量，stock欄位 */</code></div><div class="line number11 index10 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`stock` (</code></div><div class="line number12 index11 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number13 index12 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">name</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(255) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number14 index13 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`stock` </code><code class="sql keyword">int</code><code class="sql plain">(11) unsigned </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number15 index14 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`)</code></div><div class="line number16 index15 alt1"><code class="sql plain">) ENGINE=InnoDB </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=utf8;</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">/*! trade_record表是交易記錄表，有交易成功才記錄 */</code></div><div class="line number19 index18 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">`trade_record` (</code></div><div class="line number20 index19 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`user_id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number22 index21 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`stock_id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number23 index22 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`action_id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number24 index23 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`new_time` datetime </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`)</code></div><div class="line number26 index25 alt1"><code class="sql plain">) ENGINE=InnoDB </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=utf8;</code></div></div></td></tr></tbody></table></div></div>
<br>
<br>
<b>如何用一道指令模擬同時搶購的行為？</b><br>
我們寫一個簡單的script來跑，print.sh：<br>
<div><div id="highlighter_479825" class="syntaxhighlighter  bash"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="bash preprocessor bold">#!/usr/bin/bash</code></div><div class="line number2 index1 alt1"><code class="bash functions">echo</code> <code class="bash string">"test:$1 ms:$(($(date +%s%N)/1000000))"</code> <code class="bash plain">&gt;&gt; print.log</code></div></div></td></tr></tbody></table></div></div>
取現在的timestamp的millisecond倒到print.log中，並觀察print.log<br>
<span style="color: red;"><i>$ echo $(($(date +%s%N)/1000000))</i> </span>&nbsp;# 取現在的timestamp<br>
PHP取現在的timestamp的millisecond<br>
<i>echo round(microtime(true) * 1000);</i><br>
<br>
有兩種方法<br>
<b>1. pipe line ( 不採用 )</b><br>
<i>$ bash print.sh 1 | bash print.sh 2</i> &nbsp;# 跑兩次<br>
print.log:<br>
<span style="color: #666666;">test:1 ms:1426572647622</span><br>
<span style="color: #666666;">test:2 ms:1426572647624</span><br>
<span style="color: #666666;">test:2 ms:1426572652053</span><br>
<span style="color: #666666;">test:1 ms:1426572652057</span><br>
<br>
用pipe line執行多次print.sh後，在print.log中我們可以看到，pipe line幾乎是同時執行的，有時候甚至第二個命令會比第一個快一點。而非第一個執行完才跑第二個<br>
<br>
<b>1.1. 證明pipe line同時執行的其他方法（robert）</b><br>
1.1.1 先產生一個大一點的log檔（1G以上）<br>
<i>$ cat access_log.log &gt;&gt; tmp2.log</i> &nbsp;=&gt; 跑多次<br>
<i>$ ls tmp2.log -lh</i><br>
<span style="color: #666666;">-rw-rw-r-- 1 bear bear <b>1.1G</b> Nov &nbsp;9 11:45 tmp2.log</span><br>
1.1.2 使用pipe line，並切換screen 用top或ps檢查<br>
<i>$ cat tmp2.log |awk '{print $1}'|sort -n|uniq -c|sort -n</i><br>
<span style="color: #666666;">4372760 192.168.x.147</span><br>
<i>$ top</i><br>
或<br>
<i>$ ps aux | <span style="color: red;">egrep &nbsp;-e '(awk|sort|cat)'</span></i><br>
<span style="color: #666666;">bear &nbsp; &nbsp; 14113 19.0 &nbsp;0.0 &nbsp; 7224 &nbsp; 688 pts/7 &nbsp; &nbsp;S+ &nbsp; 14:32 &nbsp; 0:00 cat tmp2.log</span><br>
<span style="color: #666666;">bear &nbsp; &nbsp; 14114 75.0 &nbsp;0.0 &nbsp;14896 &nbsp; 984 pts/7 &nbsp; &nbsp;S+ &nbsp; 14:32 &nbsp; 0:00 awk {print $1}</span><br>
<span style="color: #666666;">bear &nbsp; &nbsp; 14115 57.0 &nbsp;0.4 &nbsp;15728 &nbsp;8568 pts/7 &nbsp; &nbsp;R+ &nbsp; 14:32 &nbsp; 0:00 sort -n</span><br>
<span style="color: #666666;">bear &nbsp; &nbsp; 14117 &nbsp;0.0 &nbsp;0.0 &nbsp;15724 &nbsp;2024 pts/7 &nbsp; &nbsp;S+ &nbsp; 14:32 &nbsp; 0:00 sort -n</span><br>
<span style="color: #666666;">bear &nbsp; &nbsp; 14119 &nbsp;0.0 
&nbsp;0.1 &nbsp; 9452 &nbsp;2136 pts/6 &nbsp; &nbsp;S+ &nbsp; 14:32 
&nbsp; 0:00 egrep --color=auto -e (awk|sort|cat)</span><br>
可以看到在原本tty結果出來之前，top和ps 都列出 pipe line 後面的 cat, awk, sort都已經在執行了<br>
<br>
正規式grep：&nbsp;<i>|&nbsp;<span style="color: red;">egrep &nbsp;-e '(awk|sort|cat)'</span></i><br>
<br>
<b>2. nohup &lt;command&gt; &amp; ( 採用 )</b><br>
<i>$ nohup bash print.sh 1 &amp; nohup bash print.sh 2 &amp;</i> #跑兩次<br>
print.log:<br>
<span style="color: #666666;">test:2 ms:1426573615274</span><br>
<span style="color: #666666;">test:1 ms:1426573615275</span><br>
<span style="color: #666666;">test:1 ms:1426573627275</span><br>
<span style="color: #666666;">test:2 ms:1426573627278</span><br>
<br>
與pipe line一樣是同時執行，有時候甚至第二個命令會比第一個快一點。<br>
<br>
<b><span style="color: red;">模擬交易程式 buy.php：</span></b><br>
<div><div id="highlighter_307596" class="syntaxhighlighter  php"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">// useage: php buy.php &lt;user_id&gt;</code></div><div class="line number2 index1 alt1"><code class="php variable">$user_id</code> <code class="php plain">= </code><code class="php variable">$argv</code><code class="php plain">[1];</code></div><div class="line number3 index2 alt2"><code class="php variable">$stock_id</code> <code class="php plain">= 1;</code></div><div class="line number4 index3 alt1"><code class="php functions">exec</code><code class="php plain">(</code><code class="php string">"echo \"user_id:$user_id, start_time_ms:$(($(date +%s%N)/1000000))\" &gt;&gt; print.log"</code><code class="php plain">);</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php plain">mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);</code></div><div class="line number7 index6 alt2"><code class="php variable">$db</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php plain">mysqli(</code><code class="php string">"localhost"</code><code class="php plain">, </code><code class="php string">"username"</code><code class="php plain">, </code><code class="php string">"password"</code><code class="php plain">, </code><code class="php string">"trade"</code><code class="php plain">);</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php variable">$action</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'user_id'</code> <code class="php plain">=&gt; </code><code class="php variable">$user_id</code><code class="php plain">, </code><code class="php string">"stock_id"</code> <code class="php plain">=&gt; </code><code class="php variable">$stock_id</code><code class="php plain">);</code></div><div class="line number10 index9 alt1"><code class="php variable">$action_record_start_id</code> <code class="php plain">= save_action_record(</code><code class="php variable">$db</code><code class="php plain">, </code><code class="php variable">$action</code><code class="php plain">);</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;query(</code><code class="php string">"SELECT * FROM `stock` WHERE id = 1"</code><code class="php plain">);</code></div><div class="line number13 index12 alt2"><code class="php variable">$row</code> <code class="php plain">= </code><code class="php variable">$result</code><code class="php plain">-&gt;fetch_assoc();</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="php keyword">try</code> <code class="php plain">{</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;</code><code class="php functions">echo</code> <code class="php string">"try!\n"</code><code class="php plain">;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// First of all, let's begin a transaction</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;autocommit(FALSE); </code><code class="php comments">// equal START TRANSACTION or BEGIN</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// A set of queries; if one fails, an exception should be thrown</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;query(</code><code class="php string">"INSERT INTO `trade_record` (`id`, `user_id`, `stock_id`, `action_id`, `new_time`) VALUES (NULL, '$user_id', '$stock_id', '$action_record_start_id', NOW());"</code><code class="php plain">);</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;query(</code><code class="php string">"UPDATE stock SET stock=stock-1 WHERE id=1"</code><code class="php plain">);</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// If we arrive here, it means that no exception was thrown</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// i.e. no query has failed, and we can commit the transaction</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;commit();</code></div><div class="line number29 index28 alt2"><code class="php plain">} </code><code class="php keyword">catch</code> <code class="php plain">(Exception </code><code class="php variable">$e</code><code class="php plain">) {</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// An exception has been thrown</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// We must rollback the transaction</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php string">"Exception!\n"</code><code class="php plain">;</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;rollback();</code></div><div class="line number34 index33 alt1"><code class="php plain">}</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="php variable">$db</code><code class="php plain">-&gt;autocommit(TRUE);</code></div><div class="line number37 index36 alt2"><code class="php variable">$action</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'action_record_start_id'</code> <code class="php plain">=&gt; </code><code class="php variable">$action_record_start_id</code><code class="php plain">, </code><code class="php string">'status'</code> <code class="php plain">=&gt; </code><code class="php string">'END_TRANSACTION'</code><code class="php plain">);</code></div><div class="line number38 index37 alt1"><code class="php plain">save_action_record(</code><code class="php variable">$db</code><code class="php plain">, </code><code class="php variable">$action</code><code class="php plain">);</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="php functions">echo</code> <code class="php string">"\n"</code><code class="php plain">;</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="php keyword">function</code> <code class="php plain">milliseconds() {</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$mt</code> <code class="php plain">= </code><code class="php functions">explode</code><code class="php plain">(</code><code class="php string">' '</code><code class="php plain">, microtime());</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$mt</code><code class="php plain">[1] * 1000 + </code><code class="php functions">round</code><code class="php plain">(</code><code class="php variable">$mt</code><code class="php plain">[0] * 1000);</code></div><div class="line number45 index44 alt2"><code class="php plain">}</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="php keyword">function</code> <code class="php plain">save_action_record(</code><code class="php variable">$db</code><code class="php plain">, </code><code class="php variable">$action</code><code class="php plain">) {</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$action_json</code> <code class="php plain">= json_encode(</code><code class="php variable">$action</code><code class="php plain">);</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;</code><code class="php variable">$ms</code> <code class="php plain">= milliseconds();</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$sql</code> <code class="php plain">= </code><code class="php string">"INSERT INTO action_record VALUES (NULL, '$action_json', '$ms', NOW())"</code><code class="php plain">;</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">// echo $sql."\n";</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;query(</code><code class="php variable">$sql</code><code class="php plain">);</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$db</code><code class="php plain">-&gt;insert_id;</code></div><div class="line number54 index53 alt1"><code class="php plain">}</code></div><div class="line number55 index54 alt2"><code class="php plain">&lt;/user_id&gt;</code></div></div></td></tr></tbody></table></div></div>
只要有執行，就寫入操作記錄(action_record)，交易成功便寫入交易記錄(trade_record)，並在商品(stock)把庫存減一，交易完成後再寫一次操作記錄，記錄這是哪個操作記錄的結束。<br>
<br>
<b>讓mysqli會丟出例外( Exceptions&nbsp;)</b><br>
<i><span style="color: red;">mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);</span></i><br>
<br>
<b>關於交易的四個特性(ACID)</b><br>
<i>A - Atomicity (原子性、不可分割)</i>：交易內的 SQL 指令，不管在任何情況，都只能是全部執行完成，或全部不執行。若是發生無法全部執行完成的狀況，則會回滾(rollback)到完全沒執行時的狀態。<br>
<i>C - Consistency (一致性)</i>：交易完成後，必須維持資料的完整性。所有資料必須符合預設的驗證規則、外鍵限制...等。<br>
<i>I - Isolation (隔離性)</i>：多個交易可以獨立、同時執行，不會互相干擾。<br>
<i>D - Durability (持久性)</i>：交易完成後，異動結果須完整的保留。<br>
<br>
<b>開始進入交易模式</b><br>
<span style="color: red;"><i>START TRANSACTION</i> 或 <i>BEGIN</i> 或&nbsp;<i>SET AUTOCOMMIT=1</i></span><br>
<b>結束交易模式</b><br>
交易完成：使用 <i><span style="color: red;">COMMIT</span></i> 儲存所有變動，並結束交易。<br>
交易過程異常：使用 <i><span style="color: red;">ROLLBACK</span></i> 回滾，取消交易，還原到未進行交易的狀態。(交易過程斷線亦會ROLLBACK)<br>
<br>
<b>更多的議題</b>，如&nbsp;<b>儲存點 (SAVEPOINT)、不能 ROLLBACK 的指令、會造成自動終止交易並 COMMIT
 的指令、查詢目前 AUTOCOMMIT 的設定值、InnoDB的3種加鎖的類型、InnoDB 實現的鎖定模式、不同 SQL 
Statements 在 InnoDB 的鎖定、讀取可能產生的異常情況、交易的4種隔離層級、設定交易層級、死結 (dead lock) </b>... 等更進階議題，請看參考資料中&nbsp;XYZ的筆記本 的連結<br>
<br>
<b>使用pipe line 同時搶購</b><br>
<i>$ php buy.php 1 | php buy.php 2 | php buy.php 3 | php buy.php 4 | php buy.php 5 | php buy.php 6 | php buy.php 7 | php buy.php 8</i> &nbsp;#1~8號使用者同時搶<br>
<b>結果：</b><br>
<div><div id="highlighter_490624" class="syntaxhighlighter  sql"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">mysql&gt; use trade;</code></div><div class="line number2 index1 alt1"><code class="sql keyword">Database</code> <code class="sql plain">changed</code></div><div class="line number3 index2 alt2"><code class="sql plain">mysql&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">stock;</code></div><div class="line number4 index3 alt1"><code class="sql plain">+</code><code class="sql comments">----+-------+-------+</code></div><div class="line number5 index4 alt2"><code class="sql plain">| id | </code><code class="sql keyword">name</code>&nbsp; <code class="sql plain">| stock |</code></div><div class="line number6 index5 alt1"><code class="sql plain">+</code><code class="sql comments">----+-------+-------+</code></div><div class="line number7 index6 alt2"><code class="sql plain">|&nbsp; 1 | phone |&nbsp;&nbsp;&nbsp;&nbsp; 0 |</code></div><div class="line number8 index7 alt1"><code class="sql plain">+</code><code class="sql comments">----+-------+-------+</code></div><div class="line number9 index8 alt2"><code class="sql plain">1 row </code><code class="sql color1">in</code> <code class="sql keyword">set</code> <code class="sql plain">(0.00 sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="sql plain">mysql&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">trade_record;</code></div><div class="line number12 index11 alt1"><code class="sql plain">+</code><code class="sql comments">----+---------+----------+-----------+---------------------+</code></div><div class="line number13 index12 alt2"><code class="sql plain">| id | user_id | stock_id | action_id | new_time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number14 index13 alt1"><code class="sql plain">+</code><code class="sql comments">----+---------+----------+-----------+---------------------+</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 | 2015-03-17 13:58:52 |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp; 2 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 | 2015-03-17 13:58:53 |</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 | 2015-03-17 13:58:53 |</code></div><div class="line number18 index17 alt1"><code class="sql plain">|&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6 | 2015-03-17 13:58:53 |</code></div><div class="line number19 index18 alt2"><code class="sql plain">|&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 | 2015-03-17 13:58:53 |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 | 2015-03-17 13:58:53 |</code></div><div class="line number21 index20 alt2"><code class="sql plain">+</code><code class="sql comments">----+---------+----------+-----------+---------------------+</code></div><div class="line number22 index21 alt1"><code class="sql plain">6 </code><code class="sql keyword">rows</code> <code class="sql color1">in</code> <code class="sql keyword">set</code> <code class="sql plain">(0.00 sec)</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">mysql&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">action_record;</code></div><div class="line number25 index24 alt2"><code class="sql plain">+</code><code class="sql comments">----+---------------------------------------------------------+---------------+---------------------+&nbsp; </code></div><div class="line number26 index25 alt1"><code class="sql plain">| id | </code><code class="sql keyword">action</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| ms&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | new_time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; </code></div><div class="line number27 index26 alt2"><code class="sql plain">+</code><code class="sql comments">----+---------------------------------------------------------+---------------+---------------------+&nbsp; </code></div><div class="line number28 index27 alt1"><code class="sql plain">|&nbsp; 1 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"4"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932876 | 2015-03-17 13:58:52 |</code></div><div class="line number29 index28 alt2"><code class="sql plain">|&nbsp; 2 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"5"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932877 | 2015-03-17 13:58:52 |</code></div><div class="line number30 index29 alt1"><code class="sql plain">|&nbsp; 3 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"1"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932878 | 2015-03-17 13:58:52 |</code></div><div class="line number31 index30 alt2"><code class="sql plain">|&nbsp; 4 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"6"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932882 | 2015-03-17 13:58:52 |</code></div><div class="line number32 index31 alt1"><code class="sql plain">|&nbsp; 5 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"2"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932884 | 2015-03-17 13:58:52 |&nbsp; </code></div><div class="line number33 index32 alt2"><code class="sql plain">|&nbsp; 6 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"3"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932886 | 2015-03-17 13:58:52 |&nbsp; </code></div><div class="line number34 index33 alt1"><code class="sql plain">|&nbsp; 7 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"8"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932886 | 2015-03-17 13:58:52 |&nbsp; </code></div><div class="line number35 index34 alt2"><code class="sql plain">|&nbsp; 8 | {</code><code class="sql string">"user_id"</code><code class="sql plain">:</code><code class="sql string">"7"</code><code class="sql plain">,</code><code class="sql string">"stock_id"</code><code class="sql plain">:1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1426571932888 | 2015-03-17 13:58:52 |</code></div><div class="line number36 index35 alt1"><code class="sql plain">|&nbsp; 9 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:1,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933040 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number37 index36 alt2"><code class="sql plain">| 10 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:2,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933072 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number38 index37 alt1"><code class="sql plain">| 11 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:8,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933139 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number39 index38 alt2"><code class="sql plain">| 12 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:5,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933172 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number40 index39 alt1"><code class="sql plain">| 13 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:6,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933239 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number41 index40 alt2"><code class="sql plain">| 14 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:4,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933272 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number42 index41 alt1"><code class="sql plain">| 15 | {</code><code class="sql string">"action_record_start_id"</code><code class="sql plain">:7,</code><code class="sql string">"status"</code><code class="sql plain">:</code><code class="sql string">"END_TRANSACTION"</code><code class="sql plain">} | 1426571933338 | 2015-03-17 13:58:53 |&nbsp; </code></div><div class="line number43 index42 alt2"><code class="sql plain">+</code><code class="sql comments">----+---------------------------------------------------------+---------------+---------------------+&nbsp; </code></div><div class="line number44 index43 alt1"><code class="sql plain">15 </code><code class="sql keyword">rows</code> <code class="sql color1">in</code> <code class="sql keyword">set</code> <code class="sql plain">(0.00 sec)</code></div></div></td></tr></tbody></table></div></div>
商品(stock)庫存為0 - 正常<br>
交易記錄(trade_record)有六筆資料 - 正常<br>
交易前的操作記錄(action_record)有8筆資料 - 正常<br>
交易後的操作記錄(action_record)有7筆資料 - <span style="color: red;">異常</span><br>
<br>
經我反覆測試後，"交易後的操作記錄"會有問題，有時候正常，有時候不足8筆<br>
<br>
<b>使用nohup &lt;command&gt; &amp; 同時搶購</b><br>
<i><span style="color: red;">$&nbsp;nohup php buy.php 1 &amp; nohup php 
buy.php 2 &amp; nohup php buy.php 3 &amp; nohup php buy.php 4 &amp; 
nohup php buy.php 5 &amp; nohup php buy.php 6 &amp; nohup php buy.php 7 
&amp; nohup php buy.php 8 &amp;</span></i><br>
經多次測試後 "交易後的操作記錄"(action_record)都有8筆資料 - 正常<br>
其他資料表與pipe line方法相同 - 正常<br>
<br>
<b>小結：</b><br>
同時跑多個進程(process)時，還是用nohup比較靠譜一點<br>
<br>
<b>範例程式(含table schema)：</b><br>
<a href="https://github.com/kalecgos0616/tools/tree/master/transaction">https://github.com/kalecgos0616/tools/tree/master/transaction</a><br>
<br>
<b>參考資料：</b><br>
<a href="http://stackoverflow.com/questions/2708237/php-mysql-transactions-examples">http://stackoverflow.com/questions/2708237/php-mysql-transactions-examples</a>&nbsp;<i>PHP + MySQL transactions examples</i><br>
<a href="http://xyz.cinc.biz/2013/05/mysql-transaction.html">http://xyz.cinc.biz/2013/05/mysql-transaction.html</a>&nbsp;<i><span style="color: red;"><b>XYZ的筆記本 - MySQL 交易功能 Transaction 整理(較詳細，主要參考這篇)</b></span></i><br>
<a href="http://stackoverflow.com/questions/12091971/how-to-start-and-end-transaction-in-mysqli">http://stackoverflow.com/questions/12091971/how-to-start-and-end-transaction-in-mysqli</a>&nbsp;<i>How to start and end transaction in mysqli?</i><br>
<a href="http://blog.longwin.com.tw/2006/03/innodb_transaction_2006/">http://blog.longwin.com.tw/2006/03/innodb_transaction_2006/</a>&nbsp;<i>MySQL InnoDB 的 Transaction 的簡易用法</i><br>
<a href="http://stackoverflow.com/questions/16548528/linux-command-to-get-time-in-milliseconds">http://stackoverflow.com/questions/16548528/linux-command-to-get-time-in-milliseconds</a>&nbsp;<i>Linux command to get time in milliseconds</i><br>
<a href="http://stackoverflow.com/questions/3656713/how-to-get-current-time-in-milliseconds-in-php">http://stackoverflow.com/questions/3656713/how-to-get-current-time-in-milliseconds-in-php</a>&nbsp;<i>How to get current time in milliseconds in PHP?</i><br>
<a href="http://stackoverflow.com/questions/14578243/turning-query-errors-to-exceptions-in-mysqli">http://stackoverflow.com/questions/14578243/turning-query-errors-to-exceptions-in-mysqli</a>&nbsp;<i>Turning query errors to Exceptions in MySQLi</i><br>
<a href="http://oss.org.cn/man/database/mysql/inonodb_zh/8.htm">http://oss.org.cn/man/database/mysql/inonodb_zh/8.htm</a>&nbsp;<i>InnoDB 事务模式与锁定</i>
<div style="clear: both;"></div>
</div>
<div class="post-footer">
<div class="post-footer-line post-footer-line-1"><span class="post-author vcard">
張貼者：
<span class="fn">
<a href="https://plus.google.com/108097203437571368519" itemprop="author" rel="author" title="author profile">
Kai Bear
</a>
</span>
</span>
<span class="post-timestamp">
於
<a class="timestamp-link" href="http://carlislebear.blogspot.tw/2015/03/use-mysql-transaction-in-php.html" itemprop="url" rel="bookmark" title="permanent link"><abbr class="published" itemprop="datePublished" title="2015-03-17T16:27:00+08:00">下午4:27</abbr></a>
</span>
<span class="post-comment-link">
</span>
<span class="post-icons">
<span class="item-control blog-admin pid-1613213664">
<a href="https://www.blogger.com/post-edit.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;from=pencil" title="編輯文章">
<img alt="" class="icon-action" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_edit_allbkg.gif" height="18" width="18">
</a>
</span>
</span>
<div class="post-share-buttons goog-inline-block">
<a class="goog-inline-block share-button sb-email" href="https://www.blogger.com/share-post.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;target=email" target="_blank" title="以電子郵件傳送這篇文章"><span class="share-button-link-text">以電子郵件傳送這篇文章</span></a><a class="goog-inline-block share-button sb-blog" href="https://www.blogger.com/share-post.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;target=blog" onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target="_blank" title="BlogThis！"><span class="share-button-link-text">BlogThis！</span></a><a class="goog-inline-block share-button sb-twitter" href="https://www.blogger.com/share-post.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;target=twitter" target="_blank" title="分享至 Twitter"><span class="share-button-link-text">分享至 Twitter</span></a><a class="goog-inline-block share-button sb-facebook" href="https://www.blogger.com/share-post.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;target=facebook" onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target="_blank" title="分享至 Facebook"><span class="share-button-link-text">分享至 Facebook</span></a><a class="goog-inline-block share-button sb-pinterest" href="https://www.blogger.com/share-post.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;target=pinterest" target="_blank" title="分享到 Pinterest"><span class="share-button-link-text">分享到 Pinterest</span></a><div class="goog-inline-block google-plus-share-container"><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 300px; height: 20px;"><iframe title="+1" data-gapiattached="true" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/fastbutton.html" name="I0_1482734875519" id="I0_1482734875519" vspace="0" tabindex="0" style="position: static; top: 0px; width: 300px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div></div>
</div>
</div>
<div class="post-footer-line post-footer-line-2"><span class="post-labels">
標籤：
<a href="http://carlislebear.blogspot.tw/search/label/mysql" rel="tag">mysql</a>,
<a href="http://carlislebear.blogspot.tw/search/label/php" rel="tag">php</a>
</span>
</div>
<div class="post-footer-line post-footer-line-3"><span class="post-location">
</span>
</div>
</div>
</div>
<div class="comments" id="comments">
<a name="comments"></a>
<h4>沒有留言:</h4>
<div id="Blog1_comments-block-wrapper">
<dl class="avatar-comment-indent" id="comments-block">
</dl>
</div>
<p class="comment-footer">
</p><div class="comment-form">
<a name="comment-form"></a>
<h4 id="comment-post-message">張貼留言</h4>
<p>
</p>
<a href="https://www.blogger.com/comment-iframe.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;blogspotRpcToken=138068" id="comment-editor-src"></a>
<iframe data-resized="true" allowtransparency="true" class="blogger-iframe-colorize blogger-comment-from-post" id="comment-editor" name="comment-editor" src="https://www.blogger.com/comment-iframe.g?blogID=3222136512686545171&amp;postID=3974337916223683587&amp;blogspotRpcToken=138068#%7B%22color%22%3A%22rgb%2834%2C%2034%2C%2034%29%22%2C%22backgroundColor%22%3A%22rgb%28255%2C%20255%2C%20255%29%22%2C%22unvisitedLinkColor%22%3A%22rgb%2834%2C%20136%2C%20187%29%22%2C%22fontFamily%22%3A%22Arial%2CTahoma%2CHelvetica%2CFreeSans%2Csans-serif%22%7D" frameborder="0" height="215px" width="100%"></iframe>
<script type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/3629047462-comment_from_post_iframe.js"></script>
<script type="text/javascript">
      BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html');
    </script>
</div>
<p></p>
<div id="backlinks-container">
<div id="Blog1_backlinks-container">
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="http://carlislebear.blogspot.tw/2015/03/fix-xfce4-cant-change-button-appearance.html" id="Blog1_blog-pager-newer-link" title="較新的文章">較新的文章</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="http://carlislebear.blogspot.tw/2015/03/cherry-pick-git-commit-to-svn.html" id="Blog1_blog-pager-older-link" title="較舊的文章">較舊的文章</a>
</span>
<a class="home-link" href="http://carlislebear.blogspot.tw/">首頁</a>
</div>
<div class="clear"></div>
<div class="post-feeds">
<div class="feed-links">
訂閱：
<a class="feed-link" href="http://carlislebear.blogspot.com/feeds/3974337916223683587/comments/default" target="_blank" type="application/atom+xml">張貼留言 (Atom)</a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'zh_TW'};</script>
</div></div>
</div>
</div>
<div class="column-left-outer">
<div class="column-left-inner">
<aside>
</aside>
</div>
</div>
<div class="column-right-outer">
<div class="column-right-inner">
<aside>
<div class="sidebar section" id="sidebar-right-1"><div class="widget Text" data-version="1" id="Text1">
<h2 class="title">Hello</h2>
<div class="widget-content">
<ul class="posts" style="background-color: white; border-width: 0px; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 12px; line-height: 14.399999618530273px; list-style: none none; margin: 0px; padding: 0px; text-indent: -15px;"><li style="background-image: none; border-width: 0px; list-style: none outside none; margin: 0.25em 0px; padding: 0.25em 0px 0.25em 1.3em;"><a href="http://carlislebear.blogspot.com/2012/05/hello-world.html" style="color: #33aaff;">如何在blogger上加上syntax highlight</a></li></ul>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=Text&amp;widgetId=Text1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Text1"));' target="configText1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget HTML" data-version="1" id="HTML1">
<h2 class="title">test</h2>
<div class="widget-content">
<div>寫blog也一段時間了，文章多了覺得自己寫的蠻亂的，在這邊記下要找時間把細部的文章分離出去</div><br><script>
(function() {
 var cx = '008096689003829976346:i2epm4hq7aq';
 var gcse = document.createElement('script');
 gcse.type = 'text/javascript';
 gcse.async = true;
 gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
     '//www.google.com/cse/cse.js?cx=' + cx;
 var s = document.getElementsByTagName('script')[0];
 s.parentNode.insertBefore(gcse, s);
})();
</script><br><div id="___gcse_0"><div class="gsc-control-cse gsc-control-cse-zh_TW"><div dir="ltr" class="gsc-control-wrapper-cse"><form accept-charset="utf-8" class="gsc-search-box"><table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-input"><input style="outline: medium none; background: rgb(255, 255, 255) url(&quot;http://www.google.com/cse/static/zh_TW/google_custom_search_watermark.gif&quot;) no-repeat scroll left center;" spellcheck="false" dir="ltr" id="gsc-i-id2" title="搜尋" name="search" class=" gsc-input" size="10" autocomplete="off" type="text"><input id="bgresponse" name="bgresponse" type="hidden"></td><td class="gsc-search-button"><input title="搜尋" class="gsc-search-button" value="搜尋" type="button"></td><td class="gsc-clear-button"><div title="清除結果" class="gsc-clear-button">&nbsp;</div></td></tr></tbody></table><table class="gsc-branding" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">技術提供：</div></td><td class="gsc-branding-img"><img class="gsc-branding-img" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/small-logo.png"></td></tr></tbody></table></form><div class="gsc-results-wrapper-overlay"><div tabindex="0" class="gsc-results-close-btn"></div><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">自訂搜尋</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table class="gsc-above-wrapper-area-container" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td><td class="gsc-orderby-container"><div class="gsc-orderby-invisible"><div class="gsc-orderby-label gsc-inline-block">排序依據：</div><div class="gsc-option-menu-container gsc-inline-block"><div class="gsc-selected-option-container gsc-inline-block"><div class="gsc-selected-option">Relevance</div><div class="gsc-option-selector"></div></div><div class="gsc-option-menu-invisible"><div class="gsc-option-menu-item gsc-option-menu-item-highlighted"><div class="gsc-option">Relevance</div></div><div class="gsc-option-menu-item"><div class="gsc-option">Date</div></div></div></div></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">網頁</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div title="顯示單一結果" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="顯示更多結果" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="顯示所有結果" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div><div tabindex="0" class="gsc-modal-background-image"></div></div></div></div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=HTML&amp;widgetId=HTML1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML1"));' target="configHTML1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget Text" data-version="1" id="Text2">
<h2 class="title">備忘錄</h2>
<div class="widget-content">
<span style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;">GFS、DRBD、Heartbeat</span><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">RAID、SSD+mysql index</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">MFS(Mirror File System)</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">正規化</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">wiki data index search</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">mytop - 观察mysql什麽鬼东西卡住，抓slow query(ex. 3000秒)</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">PHP魔術方法</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; line-height: normal;font-family:&quot;;font-size:100%;"><span style="font-family:&quot;;">apache jmeter</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;"><span>https://www.percona.com/software/mysql-database/percona-server</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;"><span>panabit</span></div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">nginx - 反向代理、js跨域、替换源站、域名重定向、墙、包新module rpm/deb</div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">PHP - 自动加载类 __autoload()、Namespaces、重载(魔术方法)</div><div style="font-family: Georgia, serif; font-size: 100%; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">MySQL優化</div><div><span style="font-family:Georgia, serif;">karaf</span></div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=Text&amp;widgetId=Text2&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Text2"));' target="configText2" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget CustomSearch" data-version="1" id="CustomSearch1">
<h2 class="title">搜尋此網誌</h2>
<div class="widget-content">
<div id="CustomSearch1_form"><form accept-charset="utf-8" class="gsc-search-box"><table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-input"><input title="搜尋" name="search" class=" gsc-input" size="10" autocomplete="off" type="text"><input id="bgresponse" name="bgresponse" type="hidden"></td><td class="gsc-search-button"><input title="搜尋" class="gsc-search-button" value="搜尋" type="submit"></td></tr></tbody></table><table class="gsc-branding" cellpadding="0" cellspacing="0"><tbody><tr style="display: none;"><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">技術提供：</div></td><td class="gsc-branding-img-noclear"><img class="gsc-branding-img-noclear" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/small-logo.png"></td></tr></tbody></table></form></div>
</div>
<style type="text/css">
      #uds-searchControl .gs-result .gs-title,
      #uds-searchControl .gs-result .gs-title *,
      #uds-searchControl .gsc-results .gsc-trailing-more-results,
      #uds-searchControl .gsc-results .gsc-trailing-more-results * {
        color:#2288bb;
      }

      #uds-searchControl .gs-result .gs-title a:visited,
      #uds-searchControl .gs-result .gs-title a:visited * {
        color:#888888;
      }

      #uds-searchControl .gs-relativePublishedDate,
      #uds-searchControl .gs-publishedDate {
        color: #777777;
      }

      #uds-searchControl .gs-result a.gs-visibleUrl,
      #uds-searchControl .gs-result .gs-visibleUrl {
        color: #2288bb;
      }

      #uds-searchControl .gsc-results {
        border-color: #eeeeee;
        background-color: #ffffff;
      }

      #uds-searchControl .gsc-tabhActive {
        border-color: #eeeeee;
        border-top-color: #eeeeee;
        background-color: #ffffff;
        color: #222222;
      }

      #uds-searchControl .gsc-tabhInactive {
        border-color: #eeeeee;
        background-color: transparent;
        color: #2288bb;
      }

      #uds-searchClearResults {
        border-color: #eeeeee;
      }

      #uds-searchClearResults:hover {
        border-color: #eeeeee;
      }

      #uds-searchControl .gsc-cursor-page {
        color: #2288bb;
      }

      #uds-searchControl .gsc-cursor-current-page {
        color: #222222;
      }
    </style>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=CustomSearch&amp;widgetId=CustomSearch1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("CustomSearch1"));' target="configCustomSearch1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget BlogArchive" data-version="1" id="BlogArchive1">
<h2>網誌存檔</h2>
<div class="widget-content">
<div id="ArchiveList">
<div id="BlogArchive1_ArchiveList">
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/search?updated-min=2016-01-01T00:00:00%2B08:00&amp;updated-max=2017-01-01T00:00:00%2B08:00&amp;max-results=33">
2016
</a>
<span class="post-count" dir="ltr">(33)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_10_01_archive.html">
十月
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_09_01_archive.html">
九月
</a>
<span class="post-count" dir="ltr">(5)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_08_01_archive.html">
八月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_07_01_archive.html">
七月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_06_01_archive.html">
六月
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_05_01_archive.html">
五月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_04_01_archive.html">
四月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_03_01_archive.html">
三月
</a>
<span class="post-count" dir="ltr">(8)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_02_01_archive.html">
二月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2016_01_01_archive.html">
一月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/search?updated-min=2015-01-01T00:00:00%2B08:00&amp;updated-max=2016-01-01T00:00:00%2B08:00&amp;max-results=50">
2015
</a>
<span class="post-count" dir="ltr">(85)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_12_01_archive.html">
十二月
</a>
<span class="post-count" dir="ltr">(5)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_11_01_archive.html">
十一月
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_10_01_archive.html">
十月
</a>
<span class="post-count" dir="ltr">(9)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_09_01_archive.html">
九月
</a>
<span class="post-count" dir="ltr">(12)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_08_01_archive.html">
八月
</a>
<span class="post-count" dir="ltr">(8)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_07_01_archive.html">
七月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_05_01_archive.html">
五月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_03_01_archive.html">
三月
</a>
<span class="post-count" dir="ltr">(7)</span>
<ul class="posts">
<li><a href="http://carlislebear.blogspot.tw/2015/03/aliyun-useage-and-apply-domain-record-in-china.html">阿里雲和網站備案實戰</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/fix-xfce4-cant-change-button-appearance.html">XFCE4 無法更改外觀</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/use-mysql-transaction-in-php.html">用PHP實現MySQL Transaction 交易功能</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/cherry-pick-git-commit-to-svn.html">將別的repository的commit合併到svn上</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/use-mysqlconnect-and-mysqli-and-pdo-connect-mysql.html">使用 PHP-MySQL, PHP-MySQLi, PDO 連線資料庫</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/Differences-between-INDEX-PRIMARY-UNIQUE-FULLTEXT-in-MySQL.html">MySQL的INDEX、PRIMARY、UNIQUE、FULLTEXT 索引差異</a></li>
<li><a href="http://carlislebear.blogspot.tw/2015/03/mysql-difference-between-MyISAM-and-InnoDB.html">MySQL 中MyISAM 與 InnoDB 的差異</a></li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_02_01_archive.html">
二月
</a>
<span class="post-count" dir="ltr">(11)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2015_01_01_archive.html">
一月
</a>
<span class="post-count" dir="ltr">(20)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/search?updated-min=2014-01-01T00:00:00%2B08:00&amp;updated-max=2015-01-01T00:00:00%2B08:00&amp;max-results=50">
2014
</a>
<span class="post-count" dir="ltr">(57)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_12_01_archive.html">
十二月
</a>
<span class="post-count" dir="ltr">(9)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_11_01_archive.html">
十一月
</a>
<span class="post-count" dir="ltr">(18)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_10_01_archive.html">
十月
</a>
<span class="post-count" dir="ltr">(10)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_07_01_archive.html">
七月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_06_01_archive.html">
六月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_05_01_archive.html">
五月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_04_01_archive.html">
四月
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_03_01_archive.html">
三月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_02_01_archive.html">
二月
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2014_01_01_archive.html">
一月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/search?updated-min=2013-01-01T00:00:00%2B08:00&amp;updated-max=2014-01-01T00:00:00%2B08:00&amp;max-results=50">
2013
</a>
<span class="post-count" dir="ltr">(70)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_12_01_archive.html">
十二月
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_11_01_archive.html">
十一月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_10_01_archive.html">
十月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_09_01_archive.html">
九月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_08_01_archive.html">
八月
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_07_01_archive.html">
七月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_06_01_archive.html">
六月
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_05_01_archive.html">
五月
</a>
<span class="post-count" dir="ltr">(5)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_04_01_archive.html">
四月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_03_01_archive.html">
三月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_02_01_archive.html">
二月
</a>
<span class="post-count" dir="ltr">(11)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2013_01_01_archive.html">
一月
</a>
<span class="post-count" dir="ltr">(7)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/search?updated-min=2012-01-01T00:00:00%2B08:00&amp;updated-max=2013-01-01T00:00:00%2B08:00&amp;max-results=31">
2012
</a>
<span class="post-count" dir="ltr">(31)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_12_01_archive.html">
十二月
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_11_01_archive.html">
十一月
</a>
<span class="post-count" dir="ltr">(5)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_10_01_archive.html">
十月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_09_01_archive.html">
九月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_08_01_archive.html">
八月
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_07_01_archive.html">
七月
</a>
<span class="post-count" dir="ltr">(4)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_06_01_archive.html">
六月
</a>
<span class="post-count" dir="ltr">(6)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://carlislebear.blogspot.tw/2012_05_01_archive.html">
五月
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target="configBlogArchive1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Label" data-version="1" id="Label1">
<h2>標籤</h2>
<div class="widget-content cloud-label-widget-content">
<span class="label-size label-size-5">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/linux">linux</a>
<span class="label-count" dir="ltr">(43)</span>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/php">php</a>
<span class="label-count" dir="ltr">(36)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/mysql">mysql</a>
<span class="label-count" dir="ltr">(20)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/arch%20linux">arch linux</a>
<span class="label-count" dir="ltr">(18)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/windows">windows</a>
<span class="label-count" dir="ltr">(15)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/centos">centos</a>
<span class="label-count" dir="ltr">(11)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/git">git</a>
<span class="label-count" dir="ltr">(9)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/javascript">javascript</a>
<span class="label-count" dir="ltr">(9)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/ubuntu">ubuntu</a>
<span class="label-count" dir="ltr">(9)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/network">network</a>
<span class="label-count" dir="ltr">(8)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/ngnix">ngnix</a>
<span class="label-count" dir="ltr">(8)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/VPS">VPS</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/X-window">X-window</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/docker">docker</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/svn">svn</a>
<span class="label-count" dir="ltr">(6)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/apache">apache</a>
<span class="label-count" dir="ltr">(5)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/gitlab">gitlab</a>
<span class="label-count" dir="ltr">(5)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/sublime">sublime</a>
<span class="label-count" dir="ltr">(5)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/CI">CI</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/debian">debian</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/perl">perl</a>
<span class="label-count" dir="ltr">(4)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/bash">bash</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/chrome">chrome</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/eclipse">eclipse</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/hardware">hardware</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/phpmyadmin">phpmyadmin</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/DNS">DNS</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/IE">IE</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/VirtualBox">VirtualBox</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/css">css</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/jQuery">jQuery</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/java">java</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/Amazon">Amazon</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/KDE">KDE</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/SSL">SSL</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/XML">XML</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/api">api</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/bootstrap">bootstrap</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/crontab">crontab</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/curl">curl</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/encrypt">encrypt</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/firebug">firebug</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/firefox">firefox</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/github">github</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/joomla">joomla</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/office">office</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/regex">regex</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/ssh">ssh</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://carlislebear.blogspot.tw/search/label/vim">vim</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=Label&amp;widgetId=Label1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Label1"));' target="configLabel1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
<table class="section-columns columns-2" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="first columns-cell">
<div class="sidebar section" id="sidebar-right-2-1"><div class="widget Profile" data-version="1" id="Profile1">
<h2>關於我自己</h2>
<div class="widget-content">
<a href="https://plus.google.com/108097203437571368519"><img alt="我的相片" class="profile-img" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/photo.jpg" height="80" width="80"></a>
<dl class="profile-datablock">
<dt class="profile-data">
<a data-gapiattached="true" data-onload="true" data-gapiscan="true" class="profile-name-link g-profile" href="https://plus.google.com/108097203437571368519" rel="author" style="background-image: url(//www.google.com/images/icons/ui/gprofile_button-16.png);">
Kai Bear
</a>
<br>
<div id="___follow_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 115px; height: 20px;"><iframe data-gapiattached="true" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/follow.html" name="I1_1482734875526" id="I1_1482734875526" vspace="0" tabindex="0" style="position: static; top: 0px; width: 115px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" scrolling="no" marginwidth="0" marginheight="0" hspace="0" frameborder="0" width="100%"></iframe></div>
</dt>
</dl>
<a class="profile-link" href="https://plus.google.com/108097203437571368519" rel="author">檢視我的完整簡介</a>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=Profile&amp;widgetId=Profile1&amp;action=editWidget&amp;sectionId=sidebar-right-2-1" onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target="configProfile1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
</td>
<td class="columns-cell">
<div class="sidebar no-items section" id="sidebar-right-2-2"></div>
</td>
</tr>
</tbody>
</table>
<div class="sidebar no-items section" id="sidebar-right-3"></div>
</aside>
</div>
</div>
</div>
<div style="clear: both"></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class="main-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<footer>
<div class="footer-outer">
<div class="footer-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left footer-fauxborder-left">
<div class="fauxborder-right footer-fauxborder-right"></div>
<div class="region-inner footer-inner">
<div class="foot no-items section" id="footer-1"></div>
<table class="section-columns columns-2" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td class="first columns-cell">
<div class="foot no-items section" id="footer-2-1"></div>
</td>
<td class="columns-cell">
<div class="foot no-items section" id="footer-2-2"></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class="foot section" id="footer-3"><div class="widget Attribution" data-version="1" id="Attribution1">
<div class="widget-content" style="text-align: center;">
簡單範本. 技術提供：<a href="https://www.blogger.com/" target="_blank">Blogger</a>.
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=3222136512686545171&amp;widgetType=Attribution&amp;widgetId=Attribution1&amp;action=editWidget&amp;sectionId=footer-3" onclick='return _WidgetManager._PopupConfig(document.getElementById("Attribution1"));' target="configAttribution1" title="編輯">
<img alt="" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/icon18_wrench_allbkg.png" height="18" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div></div>
</div>
</div>
<div class="footer-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class="content-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<script type="text/javascript">
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>

<script type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/803954089-widgets.js"></script>
<script gapi_processed="true" type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/plusone.js"></script>
<script type="text/javascript" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/jsapi_002"></script>
<script type="text/javascript">
window['__wavt'] = 'AOuZoY7l5d3sqNmzF0TqFwdtW4B1UPibRQ:1482734852267';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d3222136512686545171','//carlislebear.blogspot.tw/2015/03/use-mysql-transaction-in-php.html','3222136512686545171');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '3222136512686545171', 'bloggerUrl': 'https://www.blogger.com', 'title': '老天尊的死期', 'pageType': 'item', 'postId': '3974337916223683587', 'url': 'http://carlislebear.blogspot.tw/2015/03/use-mysql-transaction-in-php.html', 'canonicalUrl': 'http://carlislebear.blogspot.com/2015/03/use-mysql-transaction-in-php.html', 'homepageUrl': 'http://carlislebear.blogspot.tw/', 'searchUrl': 'http://carlislebear.blogspot.tw/search', 'canonicalHomepageUrl': 'http://carlislebear.blogspot.com/', 'blogspotFaviconUrl': 'http://carlislebear.blogspot.tw/favicon.ico', 'hasCustomDomain': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'useUniversalAnalytics': false, 'pageName': '用PHP實現MySQL Transaction 交易功能', 'pageTitle': '老天尊的死期: 用PHP實現MySQL Transaction 交易功能', 'encoding': 'UTF-8', 'locale': 'zh_TW', 'localeUnderscoreDelimited': 'zh_tw', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'languageDirection': 'ltr', 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22老天尊的死期 - Atom\x22 href\x3d\x22http://carlislebear.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22老天尊的死期 - RSS\x22 href\x3d\x22http://carlislebear.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22老天尊的死期 - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/3222136512686545171/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22老天尊的死期 - Atom\x22 href\x3d\x22http://carlislebear.blogspot.com/feeds/3974337916223683587/comments/default\x22 /\x3e\n', 'meTag': '', 'openIdOpTag': '', 'googleProfileUrl': 'https://plus.google.com/108097203437571368519', 'mobileHeadScript': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'ieCssRetrofitLinks': '\x3c!--[if IE]\x3e\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22https://www.blogger.com/static/v1/jsbin/3032875878-ieretrofit.js\x22\x3e\x3c/script\x3e\n\x3c![endif]--\x3e', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/0d81398a922284ce', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': '取得連結', 'key': 'link', 'shareMessage': '取得連結', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': '分享到 Facebook', 'target': 'facebook'}, {'name': 'BlogThis&#65281;', 'key': 'blogThis', 'shareMessage': 'BlogThis&#65281;', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': '分享到 Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': '分享到 Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': '分享到 Google+', 'target': 'googleplus'}, {'name': '以電子郵件傳送', 'key': 'email', 'shareMessage': '以電子郵件傳送', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27zh_TW\x27};\x3c/script\x3e'}}}, {'name': 'features', 'data': {'widgetVisibility': true}}, {'name': 'messages', 'data': {'linkCopiedToClipboard': '已將連結複製到剪貼簿&#65281;', 'postLink': '文章連結'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': '自訂', 'variant': 'pale', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': '用PHP實現MySQL Transaction 交易功能', 'description': '情境&#65306;  假設庫存有6隻手機( stock )要賣&#65292;總共有8個人要搶購&#65292;手機庫存不能小於零&#65292;所以只有六個人會買到&#12290;把有誰在搶購( action_record )和誰搶購到紀錄( trade_record )到資料表&#65292;並更商品新庫存數量&#12290;並在交易後執行一些SQL&#65292;來確保交易後的SQ...', 'url': 'http://carlislebear.blogspot.tw/2015/03/use-mysql-transaction-in-php.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isSearch': false, 'isLabelSearch': false, 'postId': 3974337916223683587}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1086215527-lbx__zh_tw.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_TextView', new _WidgetInfo('Text1', 'sidebar-right-1', null, document.getElementById('Text1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'sidebar-right-1', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_TextView', new _WidgetInfo('Text2', 'sidebar-right-1', null, document.getElementById('Text2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_CustomSearchView', new _WidgetInfo('CustomSearch1', 'sidebar-right-1', null, document.getElementById('CustomSearch1'), {'title': '搜尋此網誌', 'includeBlog': true, 'includePostLinks': true, 'includeWeb': true, 'linkLists': [], 'blogUrl': 'http://carlislebear.blogspot.com/', 'loadingMsg': '載入中&#8230;', 'thisBlogMsg': '此網誌', 'linkedFromHereMsg': '從這裡連結', 'theWebMsg': '網頁', 'backgroundColor': '#ffffff', 'textColor': '#222222', 'dateColor': '#777777', 'linkColor': '#2288bb', 'urlColor': '#2288bb', 'visitedLinkColor': '#888888', 'borderColor': '#eeeeee', 'activeBorderColor': '#eeeeee', 'cse_ua': true}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': '載入中\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar-right-1', null, document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-2-1', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>

<iframe aria-hidden="true" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;" src="%E7%94%A8PHP%E5%AF%A6%E7%8F%BEMySQL%20Transaction%20%E4%BA%A4%E6%98%93%E5%8A%9F%E8%83%BD_files/postmessageRelay.html" id="oauth2relay1573126164" name="oauth2relay1573126164"></iframe><table class="gstl_50 gssb_c" style="width: 178px; display: none; top: 417px; left: 823px; position: absolute;" cellpadding="0" cellspacing="0"><tbody><tr><td class="gssb_f"></td><td style="width: 100%;" class="gssb_e"></td></tr></tbody></table></body></html>